'──────────────────────────────⍞000DDate Conversion and Formatting⍞000D──────────────────────────────⍞000DFunctions   →days←  and →date← convert between ⎕TS format and the number of days⍞000Dsince   1899-12-31 00:00:00   (sometimes  called  "International  Day  Number").⍞000D→timestamp←  prefixes  a character vector message with an ISO-standard(ish) date⍞000Dand time. (ISO puts a ''T'' between date and time).⍞000D⍞000D      ⎕ts                                   ⍝ Time now.⍞000D2000 12 25 13 48 52 0⍞000D⍞000D      days ⎕ts                              ⍝ IDN: Days since 1899-12-31⍞000D36884.58333⍞000D⍞000D      date 36884.61729                      ⍝ Date from day number.⍞000D2000 12 25 14 48 53 856⍞000D⍞000D      ⎕ts≡date days ⎕ts                     ⍝ Full circle.⍞000D1⍞000D⍞000D      2000 12 25 14 48 46 timestamp ''Now''   ⍝ Formatted date.⍞000D2000-12-25 14:48:46 Now⍞000D⍞000DA  complication  that arises with converting historical dates is the change from⍞000Dthe Julian to the →Gregorian_calendar←.⍞000D⍞000DWe can make a ⎕TS formatter by composing function →timestamp← with null:⍞000D⍞000D      show←timestamp∘''''⍞000D⍞000D      show ⎕ts                              ⍝ Time now.⍞000D2000-12-25 14:15:44⍞000D⍞000DTimestamps  on  file  components  are  in 60th of a second since 1970-01-01. The⍞000Dfollowing function converts  ⎕frdci time into day number. Notice that the const-⍞000Dants  (days 1970 1 1)  and  (÷×/1 3/24 60)  are evaluated at definition time and⍞000Dbound as operands to the derived function.⍞000D⍞000D      compidn←(days 1970 1 1){⍺⍺+⍵⍵×(⎕io+2)⊃⎕frdci ⍺ ⍵}(÷×/1 3/24 60)⍞000D⍞000D      show date 1 compidn 3                 ⍝ Write-time: fnum 1, component 3.⍞000D2000-12-25 14:09:16⍞000D⍞000D      ⎕cr''compidn''                          ⍝ Canonical rep of derived function.⍞000D┌─────┬──────────────────────────┬──────────────┐⍞000D│25568│{⍺⍺+⍵⍵×(⎕IO+2)⊃⎕FRDCI ⍺ ⍵}│1.929012346E¯7│⍞000D└─────┴──────────────────────────┴──────────────┘⍞000D⍞000DHere''s a handy little function to return day-of-week from a ⎕TS-type argument:⍞000D⍞000D      dow←{(⎕io+7|⌊days ⍵)⊃''Sun'' ''Mon'' ''Tue'' ''Wed'' ''Thu'' ''Fri'' ''Sat''}⍞000D⍞000D      dow ⎕ts                               ⍝ TGI Friday!⍞000DFri⍞000D⍞000DNote  that  1899-12-31 00:00:00 is an _arbitrary_ choice of "epoch" selected for⍞000Ddate  representation  with  the  ⎕SM/⎕SR  character-based screen manager. We can⍞000Deasily compose functions based on other starting points:⍞000D⍞000DThe Julian epoch started at noon on Jan 1st, ¯4712:⍞000D⍞000D    days_julian ← 2415019.5∘+∘(15821004∘days)   ⍝ "Julian Days".⍞000D    date_julian ← ¯115860∘date∘(-∘2415019.5)⍞000D⍞000D    days_mjd ← 15019∘+∘(15821004∘days)      ⍝ "Modified Julian Days".⍞000D    date_mjd ← ¯115860∘date∘(-∘15019)⍞000D⍞000D    unix_time ← 86400∘×∘(-∘25568)∘days      ⍝ Secs since 1970-01-01 00:00:00.⍞000D    unix_date ← date∘(+∘25568)∘(÷∘86400)⍞000D⍞000D    long_count ← mayan∘(1830735∘+∘days)     ⍝ Mayan Long Count (584,285 corr.).⍞000D⍞000D    days_excel_1900 ← 1∘+days               ⍝ Excel 1900 date system.⍞000D    date_excel_1900 ← date∘(-∘1)⍞000D⍞000D    days_excel_1904 ← 1461∘+days            ⍝ Excel 1904 date system.⍞000D    date_excel_1904 ← date∘(-∘1461)⍞000D⍞000DSee also: days date cal timestamp mayan easter compidn⍞000DSee also: Gregorian_calendar British_Calendar_Act_1751⍞000D⍞000DIndex:date|calendar' 
