'rounds ← ##.rr players                      ⍝ Round-robin tournament.⍞000D⍞000DFrom Jay Foad:⍞000D⍞000DGiven an even number of participants,  how do we arrange that each plays against⍞000D(or dances with) everyone else, exactly once?⍞000D⍞000DSee: http://en.wikipedia.org/wiki/Round-robin_tournament⍞000D⍞000DFor example, with contestants, Maggie, Milly, Molly and May, there will be three⍞000Drounds.  The  columns  of  matrices  along the first axis show the bouts: in the⍞000Dfirst round, Maggie plays May, while Milly plays Molly, and so on ...⍞000D⍞000D      ''Maggie'' ''Milly'' ''Molly'' ''May''[rr 4]⍞000D Maggie  Milly⍞000D May     Molly⍞000D⍞000D Maggie  Molly⍞000D Milly   May⍞000D⍞000D Maggie  May⍞000D Molly   Milly⍞000D⍞000DTechnical note:⍞000D⍞000DNote the use of embedded assignments of local names m, v and n:⍞000D⍞000D    IO+(⍵÷2)↑[2]m,[0.5]⌽m←0,v⌽1+n n⍴v←⍳n←0⌈⍵-1⍞000D                        ¯¯          ¯¯ ¯¯⍞000DWhile embedded assignment has its detractors, there are some advantages. Taking⍞000Da trivial (and contrived) example:⍞000D⍞000D    {1+x←1+⍵}0      ⍝ successor of successor of ...⍞000D2⍞000D⍞000DFirstly, the code reads nicely from left to right: "One more than x where x is⍞000Done more than omega".                                             ¯¯¯¯¯¯¯¯¯¯¯¯⍞000D⍞000DSecondly, local assignment is _currently_ marginally faster than,  for  example,⍞000Demploying an inner Dfn. Here is a timing comparison of some alternative codings:⍞000D⍞000D    cmpx''{1+x←⍵+1}0'' ''{{1+⍵}1+⍵}0'' ''(1∘+)∘(1∘+)0'' ''{1+⍵}∘(1∘+)0'' ''{1+⍵}∘{1+⍵}0''⍞000D{1+x←⍵+1}0   → 2.1E¯6 |    0% ⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⍞000D{{1+⍵}1+⍵}0  → 2.6E¯6 |  +22% ⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⍞000D(1∘+)∘(1∘+)0 → 2.9E¯6 |  +36% ⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⍞000D{1+⍵}∘(1∘+)0 → 4.1E¯6 |  +91% ⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⍞000D{1+⍵}∘{1+⍵}0 → 4.6E¯6 | +116% ⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⎕⍞000D⍞000D(muse:⍞000D⍞000D    The code-snippet: 0⌈... is present to allow the degenerate case of a 0-play-⍞000D    er tournament, which returns  an  array  of shape 0 2 0, indicating 0 rounds⍞000D    of 0 plays each. In general, an ⍵-player  tournament requires ¯1+⍵÷2 rounds,⍞000D    so it could be argued that the length of the first axis in this case  should⍞000D    be ¯1, which is impossible.  The maths says that if no-one shows up  to  The⍞000D    Ball, the band should play ¯1 tunes before packing up and going home.⍞000D)⍞000D⍞000DExamples:⍞000D⍞000D    display rr¨ 0 2 to 8                    ⍝ Tournaments for 0 2 .. 8 players.⍞000D┌→─────────────────────────────────────┐⍞000D│ ┌┌⊖┐ ┌┌→┐ ┌┌→──┐ ┌┌→────┐ ┌┌→──────┐ │⍞000D│ ⌽↓0│ ↓↓1│ ↓↓1 2│ ↓↓1 2 3│ ↓↓1 2 3 4│ │⍞000D│ ││0│ ││2│ ││4 3│ ││6 5 4│ ││8 7 6 5│ │⍞000D│ └└~┘ └└~┘ ││   │ ││     │ ││       │ │⍞000D│           ││1 3│ ││1 3 4│ ││1 3 4 5│ │⍞000D│           ││2 4│ ││2 6 5│ ││2 8 7 6│ │⍞000D│           ││   │ ││     │ ││       │ │⍞000D│           ││1 4│ ││1 4 5│ ││1 4 5 6│ │⍞000D│           ││3 2│ ││3 2 6│ ││3 2 8 7│ │⍞000D│           └└~──┘ ││     │ ││       │ │⍞000D│                  ││1 5 6│ ││1 5 6 7│ │⍞000D│                  ││4 3 2│ ││4 3 2 8│ │⍞000D│                  ││     │ ││       │ │⍞000D│                  ││1 6 2│ ││1 6 7 8│ │⍞000D│                  ││5 4 3│ ││5 4 3 2│ │⍞000D│                  └└~────┘ ││       │ │⍞000D│                           ││1 7 8 2│ │⍞000D│                           ││6 5 4 3│ │⍞000D│                           ││       │ │⍞000D│                           ││1 8 2 3│ │⍞000D│                           ││7 6 5 4│ │⍞000D│                           └└~──────┘ │⍞000D└∊─────────────────────────────────────┘⍞000D⍞000DSee also: cmat cmpx⍞000D⍞000DIndex:Round-robin tournament|combination' 
