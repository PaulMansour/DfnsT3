'nvec ← ##.sieve nvec                    ⍝ Sieve of Eratosthenes⍞000D                                        ⍝ Eratosthenes of Cyrene (¯276-¯194)⍞000D⍞000DRemoves multiples of numbers within the argument vector. Thus sieve 2..⍵ returns⍞000Dthose  primes in the range 2..⍵.  An illustration of most of the D-function con-⍞000Dstructs: left argument defaulting; local definition; guards; tail recursion.⍞000D⍞000D(muse:⍞000D⍞000D    Among other accomplishments, Eratosthenes estimated the circumference of the⍞000D    Earth to a surprising accuracy. This is even more impressive if you remember⍞000D    that, as late as Columbus''s time, many people still believed the Earth to be⍞000D    flat.⍞000D⍞000D    http://en.wikipedia.org/wiki/Eratosthenes  reports Eratasthenes'' estimate to⍞000D    be 16% too large, taking the value of the stadion to be 185m. However, if we⍞000D    take  a  value  of  157.2, which some people derive from Pliny, the estimate⍞000D    comes in at only 3% too small.⍞000D)⍞000D⍞000D(muse:⍞000D⍞000D    A succinct way to express the vector of prime numbers up to (say) 100 is:⍞000D⍞000D          (~v∊v∘.×v)/v←1↓⍳100           ⍝ primes to 100.⍞000D    2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97⍞000D⍞000D    This expression may be read left-to-right as: "Those items of v that are not⍞000D    in the  product-table of v,  where v is a vector of all but the first of the⍞000D    numbers from 1 to 100."⍞000D⍞000D        (~ v ∊ v ∘.× v) / v ← 1 ↓ ⍳100⍞000D         │   │ └──┬──┘  └┬┘ │ └┬┘ └┬─┘⍞000D         │   │    │      └────────────────Those items of v that⍞000D         │   │    │         │  │   │⍞000D         └────────────────────────────────are not⍞000D             │    │         │  │   │⍞000D             └────────────────────────────in⍞000D                  │         │  │   │⍞000D                  └───────────────────────the product table of v,⍞000D                            │  │   │⍞000D                            └─────────────where v is a vector of⍞000D                               │   │⍞000D                               └──────────all but the first of⍞000D                                   │⍞000D                                   └──────the numbers from 1 to 100.⍞000D⍞000D    Note however, that this is an O(n*2) algorithm in both space and time and so⍞000D    is infeasible for large arguments.⍞000D⍞000D    A criticism that the APL language encourages "over computation",  in that it⍞000D    leads us into calculating many more values than are required,  is misdirect-⍞000D    ed.  The  _language_ has no interest in which values are actually calculated⍞000D    and a smart, lazy implementation might well avoid creating (parts of) inter-⍞000D    mediate arrays.⍞000D)⍞000D⍞000DExample:⍞000D⍞000D    sieve 2 to 100⍞000D2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97⍞000D⍞000DSee also: pco to⍞000D⍞000DIndex:prime number⍞000DIndex;Eratosthenes' 
