'Exact cover N-Queens⍞000D--------------------⍞000DThe N-Queens puzzle may be expressed and solved as an exact cover problem:⍞000D⍞000D    queensX←{               ⍝ Exact cover N-Queens.⍞000D        m←⍳3/⍵              ⍝ cell coordinate properties.⍞000D        r←=/¨1 0 1∘/¨m      ⍝ each rank must contain one queen.⍞000D        f←=/¨0 1 1∘/¨m      ⍝  ..  file  ..     ..      ..⍞000D⍞000D        dm←-/¨⍳2/⍵          ⍝ diagonal labels.⍞000D        du←{⍵[⍋⍵]}∪,dm      ⍝ unique labels.⍞000D        y←⊖x←dm∘.=du        ⍝ x and y diagonals.⍞000D⍞000D        m←,[⍳2]x,y,r,f      ⍝ constraints matrix.⍞000D⍞000D        d←~(⍳1↓⍴m)∊⍳2×⍴du   ⍝ mask of required cols.⍞000D        ⍵ ⍵⍴d X m           ⍝ exact cover - matrix of queens.⍞000D    }⍞000D⍞000D    ⍝ A solution for each of the first 9 N-Queens problems:⍞000D⍞000D    queensX¨ 0 to 8⍞000D┌┬─┬───┬─────┬───────┬─────────┬───────────┬─────────────┬───────────────┐⍞000D││1│0 0│0 0 0│0 1 0 0│0 0 0 0 1│0 0 0 0 1 0│0 0 0 0 0 0 1│0 0 0 0 0 0 0 1│⍞000D││ │0 0│0 0 0│0 0 0 1│0 1 0 0 0│0 0 1 0 0 0│0 0 0 0 1 0 0│0 0 0 1 0 0 0 0│⍞000D││ │   │0 0 0│1 0 0 0│0 0 0 1 0│1 0 0 0 0 0│0 0 1 0 0 0 0│1 0 0 0 0 0 0 0│⍞000D││ │   │     │0 0 1 0│1 0 0 0 0│0 0 0 0 0 1│1 0 0 0 0 0 0│0 0 1 0 0 0 0 0│⍞000D││ │   │     │       │0 0 1 0 0│0 0 0 1 0 0│0 0 0 0 0 1 0│0 0 0 0 0 1 0 0│⍞000D││ │   │     │       │         │0 1 0 0 0 0│0 0 0 1 0 0 0│0 1 0 0 0 0 0 0│⍞000D││ │   │     │       │         │           │0 1 0 0 0 0 0│0 0 0 0 0 0 1 0│⍞000D││ │   │     │       │         │           │             │0 0 0 0 1 0 0 0│⍞000D└┴─┴───┴─────┴───────┴─────────┴───────────┴─────────────┴───────────────┘⍞000D⍞000DTechnical notes:⍞000D⍞000DFunction [queensX] constructs a boolean constraint matrix m, in which  the  col-⍞000Dmums representing diagonals are optional.  As an example, the final  constraints⍞000Dmatrix for the inner function for a 4-Queens problem has these regions:⍞000D⍞000D           ┌───────────────────────────────────── x-diagonal requirements⍞000D           │             ┌─────────────────────── y-diagonal    ..  ..⍞000D           │             │          ┌──────────── rank (row)    ..  ..⍞000D           │             │          │       ┌──── file (col)    ..  ..⍞000D           │             │          │       │⍞000D    ┌─────────────┬─────────────┬───────┬───────┐⍞000D    │0 0 0 1 0 0 0│0 0 0 0 0 0 1│1 0 0 0│1 0 0 0│⍞000D    │0 0 1 0 0 0 0│0 0 0 0 0 1 0│1 0 0 0│0 1 0 0│⍞000D    │0 1 0 0 0 0 0│0 0 0 0 1 0 0│1 0 0 0│0 0 1 0│⍞000D    │1 0 0 0 0 0 0│0 0 0 1 0 0 0│1 0 0 0│0 0 0 1│⍞000D    │0 0 0 0 1 0 0│0 0 0 0 0 1 0│0 1 0 0│1 0 0 0│⍞000D    │0 0 0 1 0 0 0│0 0 0 0 1 0 0│0 1 0 0│0 1 0 0│⍞000D    │0 0 1 0 0 0 0│0 0 0 1 0 0 0│0 1 0 0│0 0 1 0│⍞000D    │0 1 0 0 0 0 0│0 0 1 0 0 0 0│0 1 0 0│0 0 0 1│⍞000D    │0 0 0 0 0 1 0│0 0 0 0 1 0 0│0 0 1 0│1 0 0 0│⍞000D    │0 0 0 0 1 0 0│0 0 0 1 0 0 0│0 0 1 0│0 1 0 0│⍞000D    │0 0 0 1 0 0 0│0 0 1 0 0 0 0│0 0 1 0│0 0 1 0│⍞000D    │0 0 1 0 0 0 0│0 1 0 0 0 0 0│0 0 1 0│0 0 0 1│⍞000D    │0 0 0 0 0 0 1│0 0 0 1 0 0 0│0 0 0 1│1 0 0 0│⍞000D    │0 0 0 0 0 1 0│0 0 1 0 0 0 0│0 0 0 1│0 1 0 0│⍞000D    │0 0 0 0 1 0 0│0 1 0 0 0 0 0│0 0 0 1│0 0 1 0│⍞000D    │0 0 0 1 0 0 0│1 0 0 0 0 0 0│0 0 0 1│0 0 0 1│⍞000D    ├─────────────┴─────────────┼───────┴───────┤⍞000D    │1 0 0 0 0 0 0 0 0 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 1 0 0 0 0 0 0 0 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 1 0 0 0 0 0 0 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 1 0 0 0 0 0 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 1 0 0 0 0 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 1 0 0 0 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 0 1 0 0 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 0 0 1 0 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 0 0 0 1 0 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 0 0 0 0 1 0 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 0 0 0 0 0 1 0 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 0 0 0 0 0 0 1 0 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 0 0 0 0 0 0 0 1 0│0 0 0 0 0 0 0 0│⍞000D    │0 0 0 0 0 0 0 0 0 0 0 0 0 1│0 0 0 0 0 0 0 0│⍞000D    └───────────────────────────┴───────────────┘⍞000D                  │                     │⍞000D                  │                     └──────── padding for required reqts.⍞000D                  └────────────────────────────── dummy rows for optional reqts.⍞000D⍞000DSee also: X queens⍞000D⍞000DIndex:N-Queens|chess puzzle' 
