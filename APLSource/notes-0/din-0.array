' rslt  ← ##.din ''''                      ⍝ Evaluation of multi-line D-expression.⍞000D{name} ← ##.din name                    ⍝ Definition of multi-line Dfn,⍞000D⍞000DNB: From Dyalog V14, this function is available as User-Command: ]dinput.⍞000D⍞000D[din] inputs a multi-line expression or definition, directly  from  the session,⍞000Dusing ⍞235E-prompting.⍞000D⍞000D[din] anticipates the input of closing braces and infers appropriate indentation⍞000Dfor each prompt.  "White dots" are included at each tab point in the prompt as a⍞000Dreminder that we''re in an input loop and to assist in keeping track  of  nesting⍞000Dlevels.⍞000D⍞000DEntering a single ''→'' character, at any time, will abort the input loop.⍞000D⍞000DIn the following illustration, only the underlined characters are typed. Notice,⍞000Din particular, that no closing braces need be entered:⍞000D⍞000D      din''dup''⍞000D      ¯¯¯¯¯¯¯¯⍞000D·   dup←{⍞000D⍞000D·   ·   {⍞000D        ¯⍞000D·   ·   ·   ⍵ ⍵⍞000D            ¯¯¯⍞000D·   ·   }⍵⍞000D         ¯⍞000D·   }⍞000D⍞000D⍞000DTechnical note:⍞000D⍞000DAfter swapping leading ''·'' characters in prompted input for blanks, [din] accum-⍞000Dulates in ⍺ and ⍵:⍞000D⍞000D    ⍺ defn: Vector of input line vectors, including comments.⍞000D⍞000D    ⍵ expr: ⋄-separated concatenation of uncommented input lines.⍞000D⍞000DAt exit, [din] tries to ⎕FX accumulated [defn] lines. If this succeeds, the name⍞000Dof the newly-fixed function is returned as a shy result.⍞000D⍞000DOtherwise,  if  the  fix fails, the accumulated [expr] is executed and, if succ-⍞000Dessful, its result is returned.⍞000D⍞000DThis means that a dfn definition will be fixed as entered, with comments intact.⍞000DIn addition, though a multi-line _derived_ function will fail to ⎕FX, it will be⍞000Destablished at second attempt by the executed assignment. See examples below.⍞000D⍞000DExamples:⍞000D⍞000D      din''''                     ⍝ multi-line expression evaluation.⍞000D·   ↑{⍞000D·   ·   size←⎕size ⍵⍞000D·   ·   ⍕⍵,size⍞000D·   }¨↓⎕nl ⍳10⍞000Ddddd  1044⍞000Ddin   6760⍞000Ddup    324⍞000Dgcd    480⍞000Dnotes 4652⍞000D⍞000D      display ⎕cr din''gcd''      ⍝ multi-line dfn definition.⍞000D·   gcd←{       ⍝ (c) Euclid⍞000D·   ·   ⍺=0:|⍵⍞000D·   ·   ⍵ ∇ |⍺-⍵⍞000D·   }⍞000D┌→───────────────────────┐⍞000D↓gcd←{       ⍝ (c) Euclid│⍞000D│    ⍺=0:|⍵              │⍞000D│    ⍵ ∇|⍺-⍵             │⍞000D│}                       │⍞000D└────────────────────────┘⍞000D⍞000D      disp ⎕cr din''dddd''        ⍝ multi-line derived function definition:⍞000D·   dddd←{⍞000D·   ·   ⍵ ⍵         ⍝ comments⍞000D·   }∘{             ⍝ disappear⍞000D·   ·   ⍵ ⍵⍞000D·   }{⍞000D·   ·   ⍺⍺ ⍺⍺ ⍵⍞000D·   }⍞000D┌───────────────┬─────────┐⍞000D│┌─────┬─┬─────┐│{⍺⍺ ⍺⍺ ⍵}│⍞000D││{⍵ ⍵}│∘│{⍵ ⍵}││         │⍞000D│└─────┴─┴─────┘│         │⍞000D└───────────────┴─────────┘⍞000D⍞000DSee also: dots⍞000D⍞000DIndex:define function|session input|⎕SE|REPL' 
