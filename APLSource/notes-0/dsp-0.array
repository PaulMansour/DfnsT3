'cmat ← {topbar←1} ##.dsp array              ⍝ Reduced version of disp.⍞000D⍞000DA frugal alternative to →display← and →disp←, which uses less screen space:⍞000D⍞000D        dsp''hello'' ''world''⍞000D    ───────────⍞000D    hello│world⍞000D⍞000DIf the general structure of the argument array is known, a left argument of 0⍞000Ddeclutters the result slightly by omitting the uppermost top bar from the disp-⍞000Dlay of nested components.⍞000D⍞000D        0 dsp''hello'' ''world''        ⍝ without top bar⍞000D    hello│world⍞000D⍞000D        dsp ⊃,∘⊂/⍳5                 ⍝ with top bar (default)⍞000D    ─────────⍞000D    1│───────⍞000D      2│─────⍞000D        3│4 5⍞000D⍞000D        0 dsp ⊃,∘⊂/⍳5               ⍝ without top bar, saves one line.⍞000D    1│───────⍞000D      2│─────⍞000D        3│4 5⍞000D⍞000DNote, however, that omitting the top bar may lead to ambiguities:⍞000D⍞000D        dsp ''hello''         ⍝ dsp of simple vector⍞000D    hello⍞000D⍞000D        dsp ⊂''hello''        ⍝ dsp of enclosed vector⍞000D    ─────⍞000D    hello⍞000D⍞000D        0 dsp ⊂''hello''      ⍝ ... without top bar⍞000D    hello⍞000D⍞000DBeware: Unlike →display← and →disp←, dsp makes no attempt to display the proto-⍞000Dtypical item of an empty sub-array. Only the adjacent separators provide a clue⍞000Dthat something is missing:⍞000D⍞000D        dsp ''Look''(⍬)''no''(⊂⊂⍬)''empties''⍞000D    ─────────────────⍞000D    Look││no││empties⍞000D⍞000DExamples:⍞000D⍞000D    cmp ← ⊂∘display , ⊂∘disp , ⊂∘dsp , ⊂∘(0∘dsp)    ⍝ display v disp v 1/0 dsp⍞000D⍞000D    ]boxing off⍞000DWas ON⍞000D⍞000D    cmp''hello'' ''world''⍞000D ┌→────────────────┐  ┌─────┬─────┐  ───────────  hello│world⍞000D │ ┌→────┐ ┌→────┐ │  │hello│world│  hello│world⍞000D │ │hello│ │world│ │  └─────┴─────┘⍞000D │ └─────┘ └─────┘ │⍞000D └∊────────────────┘⍞000D    cmp ⊃,∘⊂/⍳5⍞000D ┌→────────────────────┐  ┌─┬───────────┐  ─────────  1│───────⍞000D │   ┌→──────────────┐ │  │1│┌─┬───────┐│  1│───────    2│─────⍞000D │ 1 │   ┌→────────┐ │ │  │ ││2│┌─┬───┐││    2│─────      3│4 5⍞000D │   │ 2 │   ┌→──┐ │ │ │  │ ││ ││3│4 5│││      3│4 5⍞000D │   │   │ 3 │4 5│ │ │ │  │ ││ │└─┴───┘││⍞000D │   │   │   └~──┘ │ │ │  │ │└─┴───────┘│⍞000D │   │   └∊────────┘ │ │  └─┴───────────┘⍞000D │   └∊──────────────┘ │⍞000D └∊────────────────────┘⍞000D    cmp ↓↓2 2 2⍴⎕a⍞000D ┌→────────────────────────────┐  ┌───────┬───────┐  ───────────  ─────│─────⍞000D │ ┌→──────────┐ ┌→──────────┐ │  │┌──┬──┐│┌──┬──┐│  ─────│─────  AB│CD│EF│GH⍞000D │ │ ┌→─┐ ┌→─┐ │ │ ┌→─┐ ┌→─┐ │ │  ││AB│CD│││EF│GH││  AB│CD│EF│GH⍞000D │ │ │AB│ │CD│ │ │ │EF│ │GH│ │ │  │└──┴──┘│└──┴──┘│⍞000D │ │ └──┘ └──┘ │ │ └──┘ └──┘ │ │  └───────┴───────┘⍞000D │ └∊──────────┘ └∊──────────┘ │⍞000D └∊────────────────────────────┘⍞000D    cmp ⍳2 2                                    ⍝ nested matrix⍞000D ┌→────────────┐  ┌───┬───┐  ───────  1 1│1 2⍞000D ↓ ┌→──┐ ┌→──┐ │  │1 1│1 2│  1 1│1 2  ───┼───⍞000D │ │1 1│ │1 2│ │  ├───┼───┤  ───┼───  2 1│2 2⍞000D │ └~──┘ └~──┘ │  │2 1│2 2│  2 1│2 2⍞000D │ ┌→──┐ ┌→──┐ │  └───┴───┘⍞000D │ │2 1│ │2 2│ │⍞000D │ └~──┘ └~──┘ │⍞000D └∊────────────┘⍞000D    cmp ↑¨¨↑¨↓↓↓↓(6/2)⍴⎕a                       ⍝ nested matrices⍞000D ┌→────────────────────────────┐  ┌───────┬───────┐  ───────────  AB│EF│QR│UV⍞000D ↓ ┌→──────────┐ ┌→──────────┐ │  │┌──┬──┐│┌──┬──┐│  ─────│─────  CD│GH│ST│WX⍞000D │ ↓ ┌→─┐ ┌→─┐ │ ↓ ┌→─┐ ┌→─┐ │ │  ││AB│EF│││QR│UV││  AB│EF│QR│UV  ──┼──│──┼──⍞000D │ │ ↓AB│ ↓EF│ │ │ ↓QR│ ↓UV│ │ │  ││CD│GH│││ST│WX││  CD│GH│ST│WX  IJ│MN│YZ│CD⍞000D │ │ │CD│ │GH│ │ │ │ST│ │WX│ │ │  │├──┼──┤│├──┼──┤│  ──┼──│──┼──  KL│OP│AB│EF⍞000D │ │ └──┘ └──┘ │ │ └──┘ └──┘ │ │  ││IJ│MN│││YZ│CD││  IJ│MN│YZ│CD  ─────┼─────⍞000D │ │ ┌→─┐ ┌→─┐ │ │ ┌→─┐ ┌→─┐ │ │  ││KL│OP│││AB│EF││  KL│OP│AB│EF  GH│KL│WX│AB⍞000D │ │ ↓IJ│ ↓MN│ │ │ ↓YZ│ ↓CD│ │ │  │└──┴──┘│└──┴──┘│  ─────┼─────  IJ│MN│YZ│CD⍞000D │ │ │KL│ │OP│ │ │ │AB│ │EF│ │ │  ├───────┼───────┤  ─────│─────  ──┼──│──┼──⍞000D │ │ └──┘ └──┘ │ │ └──┘ └──┘ │ │  │┌──┬──┐│┌──┬──┐│  GH│KL│WX│AB  OP│ST│EF│IJ⍞000D │ └∊──────────┘ └∊──────────┘ │  ││GH│KL│││WX│AB││  IJ│MN│YZ│CD  QR│UV│GH│KL⍞000D │ ┌→──────────┐ ┌→──────────┐ │  ││IJ│MN│││YZ│CD││  ──┼──│──┼──⍞000D │ ↓ ┌→─┐ ┌→─┐ │ ↓ ┌→─┐ ┌→─┐ │ │  │├──┼──┤│├──┼──┤│  OP│ST│EF│IJ⍞000D │ │ ↓GH│ ↓KL│ │ │ ↓WX│ ↓AB│ │ │  ││OP│ST│││EF│IJ││  QR│UV│GH│KL⍞000D │ │ │IJ│ │MN│ │ │ │YZ│ │CD│ │ │  ││QR│UV│││GH│KL││⍞000D │ │ └──┘ └──┘ │ │ └──┘ └──┘ │ │  │└──┴──┘│└──┴──┘│⍞000D │ │ ┌→─┐ ┌→─┐ │ │ ┌→─┐ ┌→─┐ │ │  └───────┴───────┘⍞000D │ │ ↓OP│ ↓ST│ │ │ ↓EF│ ↓IJ│ │ │⍞000D │ │ │QR│ │UV│ │ │ │GH│ │KL│ │ │⍞000D │ │ └──┘ └──┘ │ │ └──┘ └──┘ │ │⍞000D │ └∊──────────┘ └∊──────────┘ │⍞000D └∊────────────────────────────┘⍞000D    cmp 0,⊂⊂⊂⍳2                                 ⍝ with nested scalar sub-array⍞000D ┌→────────────────┐  ┌─┬───────┐  ─────  0│───⍞000D │   ┌───────────┐ │  │0│┌─────┐│  0│───    ───⍞000D │ 0 │ ┌───────┐ │ │  │ ││┌───┐││    ───    1 2⍞000D │   │ │ ┌→──┐ │ │ │  │ │││1 2│││    1 2⍞000D │   │ │ │1 2│ │ │ │  │ ││└───┘││⍞000D │   │ │ └~──┘ │ │ │  │ │└─────┘│⍞000D │   │ └∊──────┘ │ │  └─┴───────┘⍞000D │   └∊──────────┘ │⍞000D └∊────────────────┘⍞000D⍞000D    ⍝ In the following progression, notice how, in contrast to display and disp,⍞000D    ⍝ dsp does not indicate the presence of an enclosed empty item:⍞000D⍞000D      ↑{cmp 0,⊂⊂⊂⍳⍵}¨2 1 0                      ⍝ enclosed empty disappears⍞000D ┌→────────────────┐  ┌─┬───────┐  ─────  0│───⍞000D │   ┌───────────┐ │  │0│┌─────┐│  0│───    ───⍞000D │ 0 │ ┌───────┐ │ │  │ ││┌───┐││    ───    1 2⍞000D │   │ │ ┌→──┐ │ │ │  │ │││1 2│││    1 2⍞000D │   │ │ │1 2│ │ │ │  │ ││└───┘││⍞000D │   │ │ └~──┘ │ │ │  │ │└─────┘│⍞000D │   │ └∊──────┘ │ │  └─┴───────┘⍞000D │   └∊──────────┘ │⍞000D └∊────────────────┘⍞000D ┌→──────────────┐    ┌─┬─────┐    ───    0│─⍞000D │   ┌─────────┐ │    │0│┌───┐│    0│─      ─⍞000D │ 0 │ ┌─────┐ │ │    │ ││┌─┐││      ─      1⍞000D │   │ │ ┌→┐ │ │ │    │ │││1│││      1⍞000D │   │ │ │1│ │ │ │    │ ││└─┘││⍞000D │   │ │ └~┘ │ │ │    │ │└───┘│⍞000D │   │ └∊────┘ │ │    └─┴─────┘⍞000D │   └∊────────┘ │⍞000D └∊──────────────┘⍞000D ┌→──────────────┐    ┌─┬────┐     ──     0│⍞000D │   ┌─────────┐ │    │0│┌──┐│     0│⍞000D │ 0 │ ┌─────┐ │ │    │ ││┌┐││⍞000D │   │ │ ┌⊖┐ │ │ │    │ ││││││⍞000D │   │ │ │0│ │ │ │    │ ││└┘││⍞000D │   │ │ └~┘ │ │ │    │ │└──┘│⍞000D │   │ └∊────┘ │ │    └─┴────┘⍞000D │   └∊────────┘ │⍞000D └∊──────────────┘⍞000D⍞000D    ⍝ dsp produces a pleasing and screen-space efficient display of a "tape"⍞000D    ⍝ data structure (see →bf←):⍞000D⍞000D    tape←{''∘'',(⍺↑⍵),{⍺ ⍵}/⍺↓⍵,''∘''}              ⍝ ⍺-window tape⍞000D    rgt←{(⊂2↑⍵),(2↓¯1↓⍵),⊃⌽⍵}                   ⍝ tape-head moves right 1 item⍞000D⍞000D    0 dsp rgt⍣5 ⊢3 tape 2/¨12↑⎕A                ⍝ partially wound 3-tape⍞000D────────────────│FF│GG│HH│─────────────⍞000D─────────────│EE          II│──────────⍞000D──────────│DD                JJ│───────⍞000D───────│CC                      KK│────⍞000D────│BB                            LL│∘⍞000D∘│AA⍞000D⍞000D    ⍝ dsp is sometimes preferable to disp when debugging nested structures:⍞000D⍞000D    8 ⎕stop''kk''         ⍝ stop at kk[8]⍞000D    kk''dsp''⍞000Dkk[8]⍞000D⍞000D    disp tx exps        ⍝ tx exps is a nested vector of tokens:⍞000D┌─────────┬───────────────────────────────┬──────────┬─────────┬───────────────·⍞000D│┌───┬─┬─┐│┌─┬─────────────────┬─┬─┬─┬─┬─┐│┌─┬────┬─┐│┌─┬─┬─┬─┐│┌─┬───┬─┬───┬─┬·⍞000D││⎕ML│←│1│││┘│┌─┬───────────┬─┐│∨│0│∊│⍴│⍵│││:│⎕FMT│⍵│││┘│⍺│←│0│││⋄│top│←│''─''│∘│·⍞000D│└───┴─┴─┘││ ││(│┌─┬─┬─┬─┬─┐│)││ │ │ │ │ ││└─┴────┴─┘│└─┴─┴─┴─┘│└─┴───┴─┴───┴─┴·⍞000D│         ││ ││ ││1│=│≡│,│⍵││ ││ │ │ │ │ ││          │         │               ·⍞000D│         ││ ││ │└─┴─┴─┴─┴─┘│ ││ │ │ │ │ ││          │         │               ·⍞000D│         ││ │└─┴───────────┴─┘│ │ │ │ │ ││          │         │               ·⍞000D│         │└─┴─────────────────┴─┴─┴─┴─┴─┘│          │         │               ·⍞000D└─────────┴───────────────────────────────┴──────────┴─────────┴───────────────·⍞000D⍞000D    0 dsp tx exps       ⍝ dsp is able to display more tokens per screen-width:⍞000D───────│─────────────────────────│────────│───────│───────────────────│────────·⍞000D⎕ML│←│1│┘│─────────────│∨│0│∊│⍴│⍵│:│⎕FMT│⍵│┘│⍺│←│0│⋄│top│←│''─''│∘│⍪│⍣│⍺│┘│2│<│⍴│·⍞000D          (│─────────│)                                                        ·⍞000D            1│=│≡│,│⍵                                                          ·⍞000D⍞000DSee also: display disp box⍞000D⍞000DIndex: boxing|display (of arrays)|tape' 
