'{name} ← ##.fix rep                         ⍝ Fix function/operator rep.⍞000D⍞000DFixes  the function or operator from its [rep]resentation. The name of the fixed⍞000Dfunction is returned as a shy result.⍞000D⍞000DTechnical note:⍞000D⍞000D[fix]  uses  a technique suggested by Maurice Jordan for re-establishing the ⎕or⍞000Dof a function. It works as follows:⍞000D⍞000DTaking the ⎕or of a function is fast because it doesn''t do anything! A _pointer_⍞000Dto  the  function  is  marked as _value_, rather than _function_ in the parser''s⍞000Dinternal  state. This  causes a name assigned to the value to have a class of 2,⍞000Drather  than  3.  Conversely, the ⎕fx of a ⎕or is fast because the parser merely⍞000Dmarks the pointer as _function_.⍞000D⍞000DA  D-  (or  traditionally  defined) _operator_ may be given either an array or a⍞000Dfunction  as operand. On receipt of an operand, the operator looks at the inter-⍞000Dnal  structure  of  the value  passed and allocates a name class accordingly. If⍞000Dthe  operator  receives the ⎕or of a function as operand, it deduces that it has⍞000Dbeen  passed  a function and sets the class (of ⍺⍺, in the case of a d:op) to 3.⍞000DMaurice''s traditionally defined operator looked like this:⍞000D⍞000D        ∇ Z←(QOR APPLY)A    ⍝ Apply ⎕OR of function to A⍞000D    [1]   Z←QOR A⍞000D        ∇⍞000D⍞000DIn  the  case  of  a derived function, [fix] passes the ⎕or as _operand_ and the⍞000D[name]  as  _argument_, to an inner operator. Notice that as ⍺⍺ is quoted in the⍞000Dargument  to  ⍎  that is used to effect the assignment, a dummy, unvisited ⍺⍺ is⍞000Dplaced  on the following line. This is in order to force the enclosing {}s to be⍞000Dan operator and so receive the ⎕or as left operand, rather than left argument.⍞000D⍞000D        fix←{                   ⍝ Fix function/operator rep.⍞000D            ···⍞000D            ⍺{                  ⍝ ⎕or (operand to inner operator).⍞000D                ⍎⍵,''←⍺⍺ ···''    ⍝ name derived/primitive/system function.⍞000D                ⍺⍺              ⍝ (dummy ⍺⍺ forces class).⍞000D            }⍵                  ⍝ name for assignment.⍞000D            ···⍞000D        }⍞000D⍞000DExample:⍞000D⍞000D    vec                         ⍝ vector of function reps.⍞000D┌──────┬──────┬──────────┐⍞000D│ ∇tfn │ ∇dfn │┌───┬────┐│⍞000D│      │      ││afn│ ×/ ││⍞000D│      │      │└───┴────┘│⍞000D└──────┴──────┴─────────→┘⍞000D⍞000D    fix¨vec                     ⍝ fix functions.⍞000D⍞000D    ⎕cr¨''afn'' ''dfn'' ''tfn''       ⍝ function ''source''.⍞000D┌──┬─────────┬─────┐⍞000D│×/│dfn←{3↑⍵}│z←tfn│⍞000D│  │         │z←⎕TS│⍞000D└──┴─────────┴─────┘⍞000D⍞000D      afn dfn tfn                   ⍝ test functions.⍞000D600300⍞000D⍞000DSee also: rep⍞000D⍞000DIndex:function, fix⍞000DIndex;Jordan M.' 
