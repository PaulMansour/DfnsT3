'{excl←''⍵''} ##.wsdiff (wsa wsb)              ⍝ Workspace differences.⍞000D⍞000DSaved  workspaces  [wsa] and [wsb] are located using WSPATH, and any differences⍞000Dare  displayed  in  the session (the function returns no explicit result). Lines⍞000Dthat  are  in one workspace,  but not in the other are displayed "split-screen".⍞000DNote  that  wsdiff does not detect differences that amount to a _re-ordering_ or⍞000D_duplication_ of lines within a function or variable. [wsdiff] is a good candid-⍞000Date  for  copying  into  a  utility  namespace in ⎕SE for reference via ⎕PATH or⍞000Dinvocation using a programmable function (PF) key: see →PF_keys←.⍞000D⍞000DBy default, functions named [wsdiff] are  excluded  from  the  comparison.  This⍞000Dmeans that [wsdiff] may be copied into the active workspace and  called  without⍞000Dreporting its presence as a difference.⍞000D⍞000DA workspace name of: '''' refers to the current active workspace.⍞000DA simple vector right argument ''wsid'' is short for: '''' ''wsid''.⍞000DA null right argument '''', is short for: '''' ⎕wsid.⍞000D⍞000DFor example:⍞000D⍞000D    wsdiff ''max'' ''min''  ⍝ compare two saved workspaces.⍞000D    wsdiff ''dfns.bak''   ⍝ compare active workspace with saved workspace.⍞000D    wsdiff ''''           ⍝ compare active workspace with saved version.⍞000D⍞000DThe optional left argument is a character vector exclusion list:⍞000D⍞000D    ''⍝'' Exclude function/operator comments from comparison.⍞000D    '' '' Exclude function/operator white space from comparison.⍞000D    ''~'' Ignore variables.⍞000D    ''∇'' Ignore functions and operators.⍞000D    ''⍵'' Ignore functions called ''wsdiff'' (default).⍞000D    ''⎕'' Discard output of differences - show only object names.⍞000D⍞000DVariables, if included are compared "line by line".⍞000D⍞000DTechnical notes:⍞000D⍞000DA complication arises in wsdiff, with trapping the DOMAIN ERROR resulting from a⍞000Dmis-spelling  of  one  of the workspace names.  Wsdiff must copy ⎕TRAP from each⍞000Dsubject  workspace  in  order  to compare the values. As error-guards are imple-⍞000Dmented  using ⎕TRAP, the incoming value _overwrites_ the error-guard. In itself,⍞000Dthis  doesn''t  cause  a  problem as by this time, the error-guard''s job is done.⍞000DHowever,  when the error-guard goes out of scope, the incoming value of ⎕TRAP is⍞000Dlost. The solution is to pass back the _value_ of the incoming  ⎕TRAP along with⍞000Dany other workspace-wide variables, as part of the result of the copy function.⍞000D⍞000DA  related  problem  occurs with using ⍎ to determine the values of variables in⍞000Dthe  respective  workspaces.  An  "external execute" operand function is used so⍞000Dthat  subject  names do not clash with local names in wsdiff. However, executing⍞000Dthe  subject name should be protected with an error guard; an example might be a⍞000DVALUE ERROR for an unitialised external variable. Again, ⎕TRAP causes a problem,⍞000Das its value will be changed by setting the error guard prior to the execute. In⍞000Dthis  case  the code-around is to extract ⎕TRAP''s value explicitly; this is easy⍞000Das ⎕TRAP has the same value, workspace-wide.⍞000D⍞000DBugs:⍞000D[wsdiff] ignores differences in arrays that contain references to namespaces.⍞000D⍞000DExamples:⍞000D⍞000D      '' ''wsdiff''c:\dyalog82\ws\patch'' ''c:\dyalog90\ws\patch''  ⍝ ignoring blanks.⍞000DPatch.Config.GET·   ·   ·   ·   ·   ·  │Patch.Config.GET·   ·   ·   ·   ·   ·⍞000D·   :If ''8''=⊃2⊃''.''⎕WG''APLVersion''   ·  │·   :If ''7''=⊃2⊃''.''⎕WG''APLVersion''   ·⍞000DPatch.Config.PUT·   ·   ·   ·   ·   ·  │Patch.Config.PUT·   ·   ·   ·   ·   ·⍞000D·   :If ''8''=⊃2⊃''.''⎕WG''APLVersion''   ·  │·   :If ''7''=⊃2⊃''.''⎕WG''APLVersion''   ·⍞000DPatch.P ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·8.1.4  (DV)· 23·Dec·1999  1955328 │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·8.1.4  (RT)· 23·Dec·1999  1955328 │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000DPatch.PATCHABLES·   ·   ·   ·   ·   ·  │Patch.PATCHABLES·   ·   ·   ·   ·   ·⍞000D·   ·8.2.2  (DV)· 23·Dec·1999  2260992 │·   ·9.0.1  (DV)· 18·Aug·2000  2692608⍞000D·   ·8.2.2  (RT)· 23·Dec·1999  2260992 │·   ·9.0.1  (RT)· 18·Aug·2000  2692608⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·8.2.3  (DV)· 17·Aug·2000  2270720⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·8.2.3  (RT)· 17·Aug·2000  2270720⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·7.4.2  (DV)· 17·Aug·2000  2185036⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·7.4.2  (RT)· 17·Aug·2000  2184976⍞000DPatch.SHOWMSG   ·   ·   ·   ·   ·   ·  │Patch.SHOWMSG   ·   ·   ·   ·   ·   ·⍞000D·   :If 0=⎕NC M ·   ·   ·   ·   ·   ·  │·   :If 9≠⎕NC M ·   ·   ·   ·   ·   ·⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │·   :OrIf ''Text''≢M ⎕WG''Type''·   ·   ·⍞000DPatch.UPDATE_PROGRESS   ·   ·   ·   ·  │Patch.UPDATE_PROGRESS   ·   ·   ·   ·⍞000D·   M ⎕WC''Static''POS(18 200)(''3D'' ''Rece│·   M ⎕WC''Static''POS(18 200)(''EdgeStyle⍞000D⍞000D⍞000D      ''⎕''wsdiff''max'' ''min''  ⍝ Discarding output lines.⍞000D⎕LX ·   ·   ·   ·   ·   ·   ·   ·   ·  │⎕LX ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │combo   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dcompile ·   ·   ·   ·   ·   ·   ·   ·  │compile ·   ·   ·   ·   ·   ·   ·   ·⍞000Dconst   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Ddefn·   ·   ·   ·   ·   ·   ·   ·   ·  │defn·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dequn·   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dextend  ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │format  ·   ·   ·   ·   ·   ·   ·   ·⍞000Dlambda  ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dlocal   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dmax ·   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │min ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dparse   ·   ·   ·   ·   ·   ·   ·   ·  │parse   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dreduce  ·   ·   ·   ·   ·   ·   ·   ·  │reduce  ·   ·   ·   ·   ·   ·   ·   ·⍞000Dshow·   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │trace   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dtrees   ·   ·   ·   ·   ·   ·   ·   ·  │trees   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dtype·   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dtypex   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dunify   ·   ·   ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·   ·   ·   ·   ·   ·   ·   ·   ·  │Background  ·   ·   ·   ·   ·   ·   ·⍞000DExample ·   ·   ·   ·   ·   ·   ·   ·  │Example ·   ·   ·   ·   ·   ·   ·   ·⍞000DImplementation  ·   ·   ·   ·   ·   ·  │·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000DIntroduction·   ·   ·   ·   ·   ·   ·  │Introduction·   ·   ·   ·   ·   ·   ·⍞000D⍞000D⍞000D      wsdiff''aaa'' ''bbb''     ⍝ system variable differences.⍞000D⎕TRAP   ·   ·   ·   ·   ·   ·   ·   ·  │⎕TRAP   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   · 11·C aaa  ·   ·   ·   ·   ·   ·  │·   · 12·C bbb  ·   ·   ·   ·   ·   ·⍞000D⎕IO ·   ·   ·   ·   ·   ·   ·   ·   ·  │⎕IO ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   1   ·   ·   ·   ·   ·   ·   ·   ·  │·   0   ·   ·   ·   ·   ·   ·   ·   ·⍞000D⍞000D⍞000D      wsdiff''''              ⍝ changes since )load.⍞000Dnotes.wsdiff·   ·   ·   ·   ·   ·   ·  │notes.wsdiff·   ·   ·   ·   ·   ·   ·⍞000D·   A workspace name·of:·'''' refers to t│·   A  workspace·name of: ''''·refers to⍞000D·   A simple·vector right argument ''wsi│·   argument·of is shorthand·for: ''''·⎕w⍞000D·   A null right·argument '''', is·short │·   ·   wsdiff ''max''·''min''  ·   ⍝ compa⍞000D·   For example:·   ·   ·   ·   ·   ·  │·   ·   wsdiff '''' ''dfns.bak''·   ⍝ compa⍞000D·   ·   wsdiff ''max''·''min''  ⍝ compare t│·   ·   wsdiff ''''   ·   ·   ·   ⍝ compa⍞000D·   ·   wsdiff ''dfns.bak''   ⍝ compare a│·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·   wsdiff ''''   ·   ·   ⍝ compare a│·   ·   ·   ·   ·   ·   ·   ·   ·   ·⍞000Dwsdiff  ·   ·   ·   ·   ·   ·   ·   ·  │wsdiff  ·   ·   ·   ·   ·   ·   ·   ·⍞000D·   ·   ·   wsv←,''⎕LX'' ''⎕TRAP''  ·   ·  │·   ·   ·   wsv←,''⎕LX'' ''⎕TRAP''  · ⍝ ''⎕S⍞000D·   ·   ·   ⎕LX←''''  ·   ·   ·   ·   ·  │·   ·   ·   ⎕LX←'''' ⍝⋄ ⎕SM←0 3⍴0 ·   ·⍞000D⍞000D⍞000D      wsdiff''aaa'' ''ccc''     ⍝ Error trapping for bad wsname.⍞000DCan''t copy: ccc⍞000D      wsdiff''aaa'' ''ccc''⍞000D     ∧⍞000D⍞000DSee also: fndiff refws Workspaces PF_keys⍞000D⍞000DIndex:compare workspaces|workspace|name-clash problem' 
