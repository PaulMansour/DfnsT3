'to ← {dirn←1} ##.polar fm               ⍝ Polar from/to cartesian coordinates.⍞000D⍞000D[to]  and  [fm]  are  corresponding arrays of shape (2,S), where pairs along the⍞000Dfirst axis represent either cartesian and polar coordinates.⍞000D⍞000DCoordinate pairs are arranged along the _first_ axis.⍞000D⍞000DThe optional left argument determines the direction of translation:⍞000D⍞000D    1 polar ...     ⍝ polar from cartesian coordinates.⍞000D   ¯1 polar ...     ⍝ cartesian from polar coordinates.⍞000D⍞000DNB: The phase angle for polar coordinates is in the range: ○0 2.⍞000D⍞000DNB: The  polar  equivalent of cartesian (0 0) is undefined.  This implementation⍞000D    arbitrarily chooses to map it to (0, ○1).⍞000D⍞000DTechnical notes:⍞000D⍞000D¯1∘polar is straightforward but 1∘polar has a couple of tricky areas.⍞000D⍞000DIn general,  the phase angle for cartesian (x y) is (¯3○y÷x). However, if x=0, a⍞000Ddomain error is generated, so we must take steps to avoid such values:⍞000D⍞000D    atan←¯3○y÷x+x=0                ⍝ arctan y÷x (avoiding y÷0).⍞000D⍞000Dand to return results ○1÷2 and ○3÷2 for +ive and -ive values of y, respectively.⍞000D⍞000DSecondly, ¯3○ returns values in the range ○÷¯2 2 (+/- pi-by-two). Using the sign⍞000Dof the cartesian coodinates, we map this value onto a range 0 ≤< ○2.⍞000D⍞000D        ┌────┬────┬────┐⍞000D     y>0│a+○1│○1÷2│ a  │  where a←¯3○y÷x⍞000D        ├────┼────┼────┤⍞000D     y=0│a+○1│(○1)│ a  │⍞000D        ├────┼────┼────┤⍞000D     y<0│a+○1│○3÷2│a+○2│⍞000D        └────┴────┴────┘⍞000D          x<0  x=0  x>0⍞000D⍞000DRef: http://en.wikipedia.org/wiki/Polar_coordinates⍞000D⍞000DExamples:⍞000D⍞000D    cmpts ← ⍉↑ ¯1 0 1∘.,1 0 ¯1              ⍝ compass points.⍞000D⍞000D    ⍴cmpts                                  ⍝ 3×3 array of coordinate pairs.⍞000D2 3 3⍞000D⍞000D    ⊂[⎕io] cmpts⍞000D┌─────┬────┬────┐⍞000D│¯1 1 │0 1 │1 1 │⍞000D├─────┼────┼────┤⍞000D│¯1 0 │0 0 │1 0 │⍞000D├─────┼────┼────┤⍞000D│¯1 ¯1│0 ¯1│1 ¯1│⍞000D└─────┴────┴────┘⍞000D⍞000D    0 3⍕polar cmpts                       ⍝ polar from cartesian.⍞000D 1.414 1.000 1.414⍞000D 1.000 0.000 1.000⍞000D 1.414 1.000 1.414⍞000D⍞000D 2.356 1.571 0.785⍞000D 3.142 3.142 0.000⍞000D 3.927 4.712 5.498⍞000D⍞000D    polar 0 0                               ⍝ singularity at 0 0⍞000D0 3.141592654⍞000D⍞000D    ¯1 polar polar 0 0                      ⍝ round-trip awkward case.⍞000D0 0⍞000D    rnd ← {(10*-⍺)×⌊0.5+⍵×10*⍺}             ⍝ rounding to ⍺ decimal places.⍞000D⍞000D    cmpts ≡ 6 rnd ¯1 polar polar cmpts      ⍝ round-trip within 6 dec places.⍞000D1⍞000D⍞000DSee also: cxdraw⍞000D⍞000DIndex:polar coordinates|cartesian coordinates|coordinates⍞000DIndex:complex numbers' 
