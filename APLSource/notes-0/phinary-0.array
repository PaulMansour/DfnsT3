'pnum ← {fmt←1} (##.phinary) nums        ⍝ Phinary representation of numbers ⍵.⍞000D⍞000D        phinary 4       ⍝ A "phinary" number.⍞000D    101.01⍞000D⍞000DPhi "The Golden Mean" has many interesting properties. A rectangle with sides of⍞000Dratio Phi:1 is considered to have a  particularly  pleasing shape and appears in⍞000Dmany  classical  works  of art.  Appending a square to this rectangle produces a⍞000Dlarger rectangle, whose sides are also in the ratio Phi:1.⍞000D⍞000D            ┌──────Ø──────┐⍞000D          ┌─┌─────────────┐─┐⍞000D          │ │             │ │⍞000D          │ │             │ 1⍞000D          Ø │             │ │⍞000D          + ├─────────────┤─┤⍞000D          1 │             │ │       Golden Rectangles⍞000D          │ │             │ │⍞000D          │ │             │ Ø           Ø+1    Ø⍞000D          │ │             │ │           --- = ---⍞000D          │ │             │ │            Ø     1⍞000D          │ │             │ │⍞000D          └─└─────────────┘─┘⍞000D            └──────Ø──────┘⍞000D⍞000DTherefore:⍞000D⍞000D         (Ø*2) = Ø+1                ⍝ from above.               [1]⍞000D⍞000D    →    0 = (Ø*2) + (-Ø) + ¯1      ⍝ by rearranging terms.⍞000D⍞000D    →    0 = Ø⊥1 ¯1 ¯1              ⍝ from definition of ⊥.⍞000D⍞000DSolving this quadratic equation in Ø, with coefficients 1 ¯1 ¯1, yields a posit-⍞000Dive root (see →roots←) of (1+(1-¯4)*0.5)÷2 or (0.5×1+5*0.5),  giving Phi a value⍞000Dof:⍞000D    1.61803398874989484820458683436563811772030917980576286213544862270526046...⍞000D⍞000DSee: http://en.wikipedia.org/wiki/Golden_ratio⍞000D⍞000DUsing Phi as a number base⍞000D--------------------------⍞000DWe are accustomed  to representing rational numbers using various integral bases⍞000Dsuch as binary, octal, hexadecimal and, of course, regular decimal. See →ary←.⍞000D⍞000D        (5/2) ⊤ 19                  ⍝ base-2 encode (binary).⍞000D    1 0 0 1 1⍞000D⍞000D        (5/3) ⊤ 19                  ⍝ base-3 encode (ternary).⍞000D    0 0 2 0 1⍞000D⍞000DBases could also be non-integral rational numbers:⍞000D⍞000D        (5/7÷3) ⊤ 19                ⍝ base-7÷3 encode.⍞000D    0 1 0.6666666667 1 0.3333333333⍞000D⍞000Dor even irrational numbers:⍞000D⍞000D        (5/○1) ⊤ 19                 ⍝ base-Pi encode.⍞000D    0 0 1 2.858407346 0.1504440785⍞000D⍞000DIn particular Phi may be used as a number base:⍞000D⍞000D        Ø ← 0.5×1+5*0.5             ⍝ Phi is "root five plus one over two".⍞000D⍞000D        (5/Ø) ⊤ 19                  ⍝ base-Ø encode.⍞000D    1 1.381966011 1.145898034 1.291796068 1.201626124⍞000D⍞000DPositional number systems tend to have a  "canonical" or "normal" form.  For ex-⍞000Dample, when using decimal notation,  we prefer  "forty-two" to  "thirty-twelve",⍞000Dand 42.0 to 41.99...⍞000D⍞000DA normal form for phinary numbers suggests that:⍞000D⍞000D    [a] Only digits 1 and 0 be used.⍞000D⍞000D    [b] There be no adjacent 1 digits.⍞000D⍞000DNotice that, in phinary, 100 = 011:                             [2]⍞000D⍞000D        100                     ⍝ [base Ø]⍞000D    →        Ø ⊥ 1 0 0          ⍝ defn of base⍞000D    →           (Ø*2) + 0 + 0   ⍝ defn of ⊤⍞000D    →              0  + Ø + 1   ⍝ from [1] above.⍞000D    →        Ø ⊥ 0 1 1          ⍝ defn of ⊤⍞000D    →   011                     ⍝ [base Ø]⍞000D⍞000DOf course,  we can multiply both sides of an equation by any constant, including⍞000Da power of Phi, so:⍞000D⍞000D    100=011 => 1000=0110 => 1.00=0.11 => 0.1=0.011 => ...⍞000D⍞000DThis gives us a rule for addition of phinary numbers in normal form:⍞000D⍞000D        1 + 1⍞000D    →   1 + 1.00                ⍝ ⍵ = ⍵.00..⍞000D    →   1 + 0.11                ⍝ from [2] above⍞000D    →       1.11                ⍝ ..1.. + ..0.. → ..1..⍞000D    →       1.10 + 0.01         ⍝ ..1.. + ..0.. → ..1..⍞000D    →      10.00 + 0.01         ⍝ from [2]⍞000D    →      10.01                ⍝ ..1.. + ..0.. → ..1..⍞000D⍞000DArranged in a traditional tableau:⍞000D⍞000D        1.00⍞000D        1.00 +⍞000D       -----⍞000D       10.01⍞000D       -----⍞000D⍞000DNotice how addition overflow causes a "carry" to propogate both one place to the⍞000Dleft AND two places to the right!⍞000D⍞000DFrom this, it is clear that successive natural numbers, generated by adding 1 to⍞000Dthe previous number, each has a finite number of phinary digits. In other words,⍞000Dnatural phinary numbers all have a finite representation, despite being the sums⍞000Dof powers of an irrational base.⍞000D⍞000D    0     0⍞000D    1     1⍞000D    2    10.01⍞000D    3   100.01⍞000D    4   101.01⍞000D    5  1000.1001⍞000D    6  1010.0001⍞000D⍞000DSee http://en.wikipedia.org/wiki/Phinary⍞000D⍞000DFunction [phinary] takes a numeric right argument and returns its "phinary" rep-⍞000Dresentation, in normal form, as character vectors of ''0'' and ''1'' digits, togeth-⍞000Der with a phinary point where necessary. For example:⍞000D⍞000D        phinary 42                      ⍝ phinary from decimal.⍞000D    10100010.00100001⍞000D⍞000DIf optional left argument [fmt] is passed as 0, the formatting is suppressed and⍞000Da vector of powers of Phi is returned:⍞000D⍞000D        0 phinary 42                    ⍝ raw powers of phi.⍞000D    7 5 1 ¯3 ¯8⍞000D⍞000D        Ø +.* 7 5 1 ¯3 ¯8               ⍝ reconstituted decimal number.⍞000D    42⍞000D⍞000D[phinary] is a self-inverse (or "involution") in that:⍞000D⍞000D        ⍵ ≡ (phinary⍣2) ⍵               ⍝ self-inverse: phinary⍣2 ←→ ⊢⍞000D⍞000D        phinary''10100010.00100001''      ⍝ decimal from phinary.⍞000D    42⍞000D⍞000DThe round-trip, applied to non-normal phinary numbers, returns the normal form:⍞000D⍞000D        phinary⍣2 ,''111.111''  ''222''     ⍝ normal form of phinary numbers.⍞000D     1010.1  10101⍞000D⍞000DThe phinary representation of numbers with components  that are exclusively non-⍞000Dnegative powers of Phi, have no ''1''s to the right of the phinary point:⍞000D⍞000D        phinary Ø +.*¨ (2 4)(3 5)       ⍝ powers of Phi => clean phinary.⍞000D     10100  101000⍞000D⍞000Dwhereas, apart from 0 and 1, regular counting numbers, expressed in phinary, in-⍞000Dclude components that are negative powers of Phi.  This  means that such numbers⍞000Dalways have ''1''s to the right of the phinary point:⍞000D⍞000D        phinary 24 35                   ⍝ counting numbers => scruffy phinary.⍞000D     1001010.000101  10001010.00001001⍞000D⍞000D(muse:⍞000D⍞000D    This raises the question:  what constitutes a "whole"  or "natural"  phinary⍞000D    number? Is it:⍞000D⍞000D        [a] those numbers with only zeros to the right of the point, or is it⍞000D⍞000D        [b] those that are conversions of decimal whole numbers into phinary?⍞000D⍞000D    The answer is that the concept of "natural number" is deeper than  its  rep-⍞000D    resentation in any particular base.  Such numbers  have  the  property  that⍞000D    they are closed under addition: adding any two produces a third  as  result.⍞000D    We can test which of the above sets of numbers is "natural",  geometrically,⍞000D    using  a  rule and compass (if we accept compass steps as a model for addit-⍞000D    ion).⍞000D⍞000D    0         1    10       100       101  1000      1001  1010     10000⍞000D    │         │     │         │         │     │         │     │         │⍞000D    ├─────────┼─────┴───┬─────┴───┬─────┴───┬─┴───────┬─┴─────┴─┬───────┴─...⍞000D    │         │         │         │         │         │         │⍞000D    0         1        10.01    100.01    101.01   1000.1001 1010.0001⍞000D⍞000D    ... so the evenly spaced members of the second set (0 1 10.01 100.01 ...)⍞000D    are the natural numbers, despite their untidy appearance.⍞000D⍞000D    Perhaps, in this context, there is a distinction between whole- and natural-⍞000D    numbers.⍞000D)⍞000D⍞000DRef:⍞000D    http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/phigits.html⍞000D    http://www.goldennumber.net⍞000D⍞000DExamples:⍞000D⍞000D    phinary 1 2 3 4                 ⍝ some small phinary numbers.⍞000D 1  10.01  100.01  101.01⍞000D⍞000D    align←{(-∘(⌈/)⍨⍵⍳¨''.'')⌽↑⍵}      ⍝ align ''.''s in char matrix.⍞000D⍞000D    ,∘align∘phinary⍨ ¯4 to 10       ⍝ integers with their phinary equivalents.⍞000D¯4  ¯101.01⍞000D¯3  ¯100.01⍞000D¯2   ¯10.01⍞000D¯1    ¯1⍞000D 0     0⍞000D 1     1⍞000D 2    10.01⍞000D 3   100.01⍞000D 4   101.01⍞000D 5  1000.1001⍞000D 6  1010.0001⍞000D 7 10000.0001⍞000D 8 10001.0001⍞000D 9 10010.0101⍞000D10 10100.0101⍞000D⍞000D    phinary 3÷17                    ⍝ rational number (non-terminating).⍞000D0.000100010100001010100101000001001000000100010100001010100101000001001⍞000D⍞000D    phinary 2*÷2                    ⍝ irrational number (non-terminating).⍞000D1.010000010100101001000000010100000000010101010101010010000000101⍞000D⍞000D    Ø ← +∘÷/40/1                    ⍝ Phi from continued fraction →cfract←.⍞000D⍞000D    phinary Ø*¯3 to 3               ⍝ powers of Phi have simple phinary reps.⍞000D 0.001  0.01  0.1  1  10  100  1000⍞000D⍞000D    Ø ≡ +∘(*∘0.5)/0,40/1            ⍝ Phi ≡ sqrt 1 + sqrt 1 + ... sqrt 1⍞000D1⍞000D    pcan ← phinary⍣2                ⍝ round-tripping produces canonical form.⍞000D⍞000D    pcan ''111.111''                  ⍝ canonical form.⍞000D1010.1⍞000D⍞000D    {↑⍵(pcan ⍵)},\9/''1''             ⍝ non- and canonical forms.⍞000D 1  11   111   1111   11111   111111   1111111   11111111   111111111⍞000D 1  100  1001  10100  101001  1010100  10101001  101010100  1010101001⍞000D⍞000DSee also: ary ratrep ratsum bt mayan hex⍞000DSee also: eval.dws/notes.bta eval.dws/notes.sba⍞000DSee also: nats rats fibonacci⍞000DSee also: numbers⍞000D⍞000DIndex:golden mean|rectangle, golden|phinary number⍞000DIndex;Kronecker L.|Eide L.N.' 
