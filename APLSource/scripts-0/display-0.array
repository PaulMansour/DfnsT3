'⍝ Boxed display of array:⍞000D⍞000D      display ''ABC''(1 4⍴1 2 3 4)(0 1 0⍴0)(⎕SE #)(''88'',99)⍞000D┌→────────────────────────────────────────┐⍞000D│ ┌→──┐ ┌→──────┐ ┌┌⊖┐ ┌→───────┐ ┌→────┐ │⍞000D│ │ABC│ ↓1 2 3 4│ ⌽↓0│ │ ⎕SE  # │ │88 99│ │⍞000D│ └───┘ └~──────┘ └└~┘ └#───────┘ └+────┘ │⍞000D└∊────────────────────────────────────────┘⍞000D⍞000D      display 2 2⍴''Tea''(2 1⍴4 2)''&''(2 40)⍞000D┌→─────────────┐⍞000D↓ ┌→──┐ ┌→┐    │⍞000D│ │Tea│ ↓4│    │⍞000D│ └───┘ │2│    │⍞000D│       └~┘    │⍞000D│       ┌→───┐ │⍞000D│ &     │2 40│ │⍞000D│ -     └~───┘ │⍞000D└∊─────────────┘⍞000D⍞000D      display (15⍴1)⍴1⍞000D┌┌┌┌┌┌┌┌┌┌┌┌┌┌→┐⍞000D↓↓↓↓↓↓↓↓↓↓↓↓↓↓1│⍞000D└└└└└└└└└└└└└└~┘⍞000D      display (15⍴0 1)⍴''a''⍞000D┌┌┌┌┌┌┌┌┌┌┌┌┌┌⊖┐⍞000D⌽↓⌽↓⌽↓⌽↓⌽↓⌽↓⌽↓ │⍞000D└└└└└└└└└└└└└└─┘⍞000D⍞000D      display ⎕tc⍞000D┌→┐⍞000D│ │⍞000D│ │⍞000D│ │⍞000D└─┘⍞000D      display ⎕tc,⊂''''⍞000D┌→──────────┐⍞000D│       ┌⊖┐ │⍞000D│       │ │ │⍞000D│ -     └─┘ │⍞000D│   - -     │⍞000D└∊──────────┘⍞000D      display,¨⎕tc⍞000D┌→────────────┐⍞000D│ ┌→┐ ┌→┐ ┌→┐ │⍞000D│ │ │ │ │ │ │ │⍞000D│ └─┘ │ │ │ │ │⍞000D│     └─┘ └─┘ │⍞000D└∊────────────┘⍞000D      display,¨16↑⎕av⍞000D┌→────────────────────────────────────────────────────────────────┐⍞000D│ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ ┌→┐ │⍞000D│ │⍞0000│ │ │ │ │ │ │ │ │ │⍞000C│ │⍞0006│ │⍞0007│ │⍞001B│ │⍞0009│ │⌶│ │ɫ│ │%│ │''│ │⍺│ │⍵│ │⍞000D│ └─┘ └─┘ │ │ │ │ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ │⍞000D│         └─┘ └─┘                                                 │⍞000D└∊────────────────────────────────────────────────────────────────┘⍞000D⍞000D      display¨(''88'',99)(88,''99'')    ⍝ ambiguous cases.⍞000D ┌→────┐  ┌→────┐ ⍞000D │88 99│  │88 99│ ⍞000D └+────┘  └+────┘ ⍞000D⍞000D      display 2 3⍴#(⎕or''display'')⎕tc ⍬ '''' (⎕or''notes'')      ⍝ some tricky cases.⍞000D┌→────────────────────────────────────────────────────────────────────────────────────────────────┐⍞000D↓     ┌───────────────────────────────────────────────────────────────────────────────┐ ┌→┐       │⍞000D│ #   │     ∇display←{⎕IO ⎕ML←0 1                        ⍝ Boxed display of array.    │ │ │       │⍞000D│     │[1]                                                                            │ │ │       │⍞000D│     │[2]       box←{                                   ⍝ box with type and axes     │ │ │       │⍞000D│     │[3]           vrt hrz←(¯1+⍴⍵)⍴¨''│─''               ⍝ vert. and horiz. lines     │ └─┘       │⍞000D│     │[4]           top←''─⊖→''[¯1↑⍺],hrz                 ⍝ upper border with axis     │           │⍞000D│     │[5]           bot←(⊃⍺),hrz                        ⍝ lower border with type     │           │⍞000D│     │[6]           rgt←''┐│'',vrt,''┘''                    ⍝ right side with corners    │           │⍞000D│     │[7]           lax←''│⌽↓''[¯1↓1↓⍺],¨⊂vrt             ⍝ left side(s) with axes,    │           │⍞000D│     │[8]           lft←⍉''┌'',(↑lax),''└''                 ⍝ ... and corners            │           │⍞000D│     │[9]           lft,(top⍪⍵⍪bot),rgt                 ⍝ fully boxed array          │           │⍞000D│     │[10]      }                                                                    │           │⍞000D│     │[11]                                                                           │           │⍞000D│     │[12]      deco←{⍺←type open ⍵ ⋄ ⍺,axes ⍵}         ⍝ type and axes vector       │           │⍞000D│     │[13]      axes←{(-2⌈⍴⍴⍵)↑1+×⍴⍵}                   ⍝ array axis types           │           │⍞000D│     │[14]      open←{16::(1⌈⍴⍵)⍴⊂''[ref]'' ⋄ (1⌈⍴⍵)⍴⍵}   ⍝ exposure of null axes      │           │⍞000D│     │[15]      trim←{(~1 1⍷∧⌿⍵='' '')/⍵}                 ⍝ removal of extra blank cols│           │⍞000D│     │[16]      type←{{(1=⍴⍵)⊃''+''⍵}∪,char¨⍵}            ⍝ simple array type          │           │⍞000D│     │[17]      char←{⍬≡⍴⍵:''─'' ⋄ (⊃⍵∊''¯'',⎕D)⊃''#~''}∘⍕    ⍝ simple scalar type         │           │⍞000D│     │[18]      line←{(6≠10|⎕DR'' ''⍵)⊃'' -''}              ⍝ underline for atom         │           │⍞000D│     │[19]                                                                           │           │⍞000D│     │[20]      {                                       ⍝ recursive boxing of arrays:│           │⍞000D│     │[21]          0=≡⍵:'' ''⍪(open ⎕FMT ⍵)⍪line ⍵       ⍝ simple scalar              │           │⍞000D│     │[22]          1 ⍬≡(≡⍵)(⍴⍵):''∇'' 0 0 box ⎕FMT ⍵     ⍝ object rep: ⎕OR            │           │⍞000D│     │[23]          1=≡⍵:(deco ⍵)box open ⎕FMT open ⍵   ⍝ simple array               │           │⍞000D│     │[24]          (''∊''deco ⍵)box trim ⎕FMT ∇¨open ⍵   ⍝ nested array               │           │⍞000D│     │[25]      }⍵                                                                   │           │⍞000D│     │[26]  }                                                                        │           │⍞000D│     │     ∇                                                                         │           │⍞000D│     └∇──────────────────────────────────────────────────────────────────────────────┘           │⍞000D│ ┌⊖┐ ┌⊖┐                                                                               ┌───────┐ │⍞000D│ │0│ │ │                                                                               │#.notes│ │⍞000D│ └~┘ └─┘                                                                               └∇──────┘ │⍞000D└∊────────────────────────────────────────────────────────────────────────────────────────────────┘' 
