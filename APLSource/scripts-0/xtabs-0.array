'⍝ Expand/compress HT chars:⍞000D⍞000D    text←''whistles        far     and wee''⍞000D⍞000D    ht←⎕ucs 9                           ⍝ horizontal tab.⍞000D⍞000D    st ← ht ''→''∘subs                    ⍝ show tab chars as →.⍞000D⍞000D    st ¯8 xtabs text                    ⍝ 8-tabs for multiple blanks.⍞000Dwhistles→far→and wee⍞000D⍞000D    st ¯4 xtabs text                    ⍝ 4-tabs for multiple blanks.⍞000Dwhistles→→far→→and→wee⍞000D⍞000D    4 xtabs ¯4 xtabs text               ⍝ 4-tabs round trip.⍞000Dwhistles        far     and wee⍞000D⍞000D    trip ← {⍵≡⍺ xtabs(-⍺)xtabs ⍵}       ⍝ check round trip for tabs ⍺, text ⍵.⍞000D⍞000D    trips ← {∧/(0,⍳1+⍴⍵)trip¨⊂⍵}        ⍝ round trips for all ⍺∊0..1+⍴⍵.⍞000D⍞000D    trips text                          ⍝ check round-trips for all tabs ⍺.⍞000D1⍞000D    trips ,(6 35⍴↑,/(⍳20)↑¨''⎕''),⊃⌽⎕tc   ⍝ text with embedded linefeeds.⍞000D1⍞000D    4 trip scripts.xtabs                ⍝ round-trip this script.⍞000D1⍞000D    (2/ht'' '')≡¯4 xtabs 10↑''''            ⍝ all-blanks case works correctly.⍞000D1⍞000D    ∧/trips¨1↓,\10↑''''                   ⍝ round-trip all-blank cases.⍞000D1⍞000D⍞000D⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝ test various codings of runs:⍞000D⍞000D    ones ← 0 1 1 1 0 1 0 1 1 0⍞000D⍞000D    runs ← {s←+\⍵ ⋄ s-⌈\s×~⍵}       ⍝ runs of adjacent 1s.⍞000D⍞000D    runs ones                       ⍝ runs of adjacent 1s.⍞000D0 1 2 3 0 1 0 1 2 0⍞000D⍞000D    runs ← {⍵{⍵-⌈\⍵×~⍺}+\⍵}         ⍝ ditto, but with no local variable.⍞000D⍞000D    runs ones                       ⍝ runs of adjacent 1s.⍞000D0 1 2 3 0 1 0 1 2 0⍞000D⍞000D⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝⍝ test various codings of onoff:⍞000D⍝⍞000D⍝ onoff codings must decide two issues:⍞000D⍝⍞000D⍝ - whether to start in state ON or OFF and⍞000D⍝ - whether a clash of 1-bits results in ON or OFF or STAY or FLIP⍞000D⍝⍞000D⍝ where STAY means to remain in the current state (ignore concident bits),⍞000D⍝ and   FLIP means to change state.⍞000D⍝⍞000D⍝ This gives rise to 8 permutations, labelled:⍞000D⍝⍞000D⍝   [00]   start OFF, resolve clash to OFF⍞000D⍝   [01]     ··  OFF   ··  ··  ··  ··  ON⍞000D⍝   [0+]     ··  OFF   ··  ··  ··  ··  STAY⍞000D⍝   [0~]     ··  OFF   ··  ··  ··  ··  FLIP⍞000D⍝   [10]     ··  ON    ··  ··  ··  ··  OFF⍞000D⍝   [11]     ··  ON    ··  ··  ··  ··  ON⍞000D⍝   [1+]     ··  ON    ··  ··  ··  ··  STAY⍞000D⍝   [1~]     ··  ON    ··  ··  ··  ··  FLIP⍞000D⍝⍞000D⍝            .------------------------------  switch ON⍞000D⍝            | .----------------------------  switch ON while ON⍞000D⍝            | |       .--------------------  switch ON⍞000D⍝            | |       |   .----------------  clash while ON⍞000D     ons ← 0 1 1 0 0 0 1 0 1 0 0 0 1 0⍞000D    offs ← 0 0 0 0 1 1 0 0 1 0 1 0 1 0⍞000D⍝                  | |         |   ''--------  clash while OFF⍞000D⍝                  | |         ''------------  switch OFF⍞000D⍝                  | ''----------------------  switch OFF while OFF⍞000D⍝                  ''------------------------  switch OFF while ON⍞000D⍞000D    op←{↑⍺ ⍵,⊂⍺ ⍺⍺ ⍵}                       ⍝ arg rows followed by result⍞000D⍞000D    ons {1↓⊃,/∨\¨(1,⍵)⊂0,⍺}op offs          ⍝ [01]⍞000D0 1 1 0 0 0 1 0 1 0 0 0 1 0⍞000D0 0 0 0 1 1 0 0 1 0 1 0 1 0⍞000D0 1 1 1 0 0 1 1 1 1 0 0 1 1⍞000D⍞000D    ons {1↓⊃,/∨\¨(1,⍵)⊂1,⍺}op offs          ⍝ [11]⍞000D0 1 1 0 0 0 1 0 1 0 0 0 1 0⍞000D0 0 0 0 1 1 0 0 1 0 1 0 1 0⍞000D1 1 1 1 0 0 1 1 1 1 0 0 1 1⍞000D⍞000D    ons {1↓⊃,/∨\¨(1,⍵)⊂0,⍺}op offs          ⍝ [01]⍞000D0 1 1 0 0 0 1 0 1 0 0 0 1 0⍞000D0 0 0 0 1 1 0 0 1 0 1 0 1 0⍞000D0 1 1 1 0 0 1 1 1 1 0 0 1 1⍞000D⍞000D    ons {1↓⊃,/∧\¨(1,⍺)⊂1,~⍵}op offs         ⍝ [10]⍞000D0 1 1 0 0 0 1 0 1 0 0 0 1 0⍞000D0 0 0 0 1 1 0 0 1 0 1 0 1 0⍞000D1 1 1 1 0 0 1 1 0 0 0 0 0 0⍞000D⍞000D    ons {1↓⊃,/∧\¨(1,⍺)⊂0,~⍵}op offs         ⍝ [00]⍞000D0 1 1 0 0 0 1 0 1 0 0 0 1 0⍞000D0 0 0 0 1 1 0 0 1 0 1 0 1 0⍞000D0 1 1 1 0 0 1 1 0 0 0 0 0 0⍞000D⍞000D    ons {n←⍺≠⍵ ⋄ ≠\n\2≠/¯1,n/⍺-⍵}op offs    ⍝ [0+]⍞000D0 1 1 0 0 0 1 0 1 0 0 0 1 0⍞000D0 0 0 0 1 1 0 0 1 0 1 0 1 0⍞000D0 1 1 1 0 0 1 1 1 1 0 0 0 0⍞000D⍞000D    ons {(⍺≠⍵){≠\⍺\2≠/¯1,⍺/⍵}⍺-⍵}op offs    ⍝ [0+]⍞000D0 1 1 0 0 0 1 0 1 0 0 0 1 0⍞000D0 0 0 0 1 1 0 0 1 0 1 0 1 0⍞000D0 1 1 1 0 0 1 1 1 1 0 0 0 0' 
